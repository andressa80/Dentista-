{% extends 'base.html' %}{% block content %}<h2>Olá, {{ session.get('dentist_name') }}</h2><p><a class="btn" href="{{ url_for('dentist_schedule') }}">Agendar Consulta</a> <a class="btn" href="{{ url_for('dentist_calendar') }}">Calendário</a></p><h3>Pacientes</h3><ul>{% for p in patients %}<li>{{ p.name }} — {{ p.email }} <a class="btn" href='{{ url_for('dentist_schedule') }}?patient_id={{p.id}}'>Agendar</a></li>{% else %}<li>Sem pacientes</li>{% endfor %}</ul><h3>Próximas Consultas</h3><ul>{% for a in appts %}<li>{{ a.date }} {{ a.time }} — {{ a.patient_name }} <button onclick="cancelAppt({{a.id}})">Cancelar</button></li>{% else %}<li>Sem consultas</li>{% endfor %}</ul><script>function cancelAppt(id){if(confirm('Cancelar?')){fetch('/api/cancel_appointment',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({id})}).then(r=>r.json()).then(j=>{ if(j.ok) location.reload(); else alert('Erro'); })}}</script>{% endblock %}